version: '3.8'

services:
  discord-bot:
    build: .
    container_name: discord-bot
    restart: unless-stopped
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - GUILD_ID=${GUILD_ID}
      - ADMIN_USER_ID=${ADMIN_USER_ID}
      - DATABASE_PATH=${DATABASE_PATH:-club.db}
      - BOT_ACTIVITY_NAME=${BOT_ACTIVITY_NAME:-ZOV ебёт азов}
      - TRANSFER_COMMISSION_RATE=${TRANSFER_COMMISSION_RATE:-0.1}
      - RING_PRICE=${RING_PRICE:-100000}
      - INITIAL_MONEY=${INITIAL_MONEY:-10}
      - INITIAL_MESSAGES=${INITIAL_MESSAGES:-1}
      - ADMIN_ROLES=${ADMIN_ROLES}
      - BADGE_ROLES=${BADGE_ROLES}
      - CONTRIBUTOR_ROLE_ID=${CONTRIBUTOR_ROLE_ID}
      - TESTER_ROLE_ID=${TESTER_ROLE_ID}
      - MAINTAINER_ROLE_ID=${MAINTAINER_ROLE_ID}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - DEBUG_MODE=${DEBUG_MODE:-false}
      - VOICE_TIME_REWARD=${VOICE_TIME_REWARD:-1}
      - VOICE_MONEY_REWARD=${VOICE_MONEY_REWARD:-20}
      - VOICE_CHECK_INTERVAL=${VOICE_CHECK_INTERVAL:-1}
    volumes:
      # Монтируем базу данных для сохранения данных
      - ./data:/app/data
      # Монтируем логи
      - ./logs:/app/logs
      # Монтируем ресурсы (опционально, для обновления без пересборки)
      - ./assets:/app/assets:ro
    env_file:
      - .env
    networks:
      - bot-network

networks:
  bot-network:
    driver: bridge

volumes:
  data:
  logs:
